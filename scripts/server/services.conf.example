# ============================================================================
# Server Services Configuration
# ============================================================================
#
# This file defines which services to manage and how to control them.
# It uses Bash associative arrays for configuration.
#
# Properties:
#   CONF_PROCESS[service]   - Process name for exact match (pkill/pgrep -x)
#   CONF_PIDFILE[service]   - Path to pidfile (authoritative, optional)
#   CONF_START[service]     - Command to start the service (required)
#   CONF_STOP[service]      - Custom stop command (optional)
#   CONF_CHECK[service]     - Custom check command (optional)
#   CONF_REQUIRED[service]  - Command to verify before starting (optional)
#   CONF_SKIP_STOP[service] - Skip during normal stop (optional, "true"/"false")
#

# List of services to manage (defines execution order)
SERVICE_ORDER=(
    "nginx"
    "php-fpm"
    "cloudflared"
    "battery"
    "sshd"
)

# ============================================================================
# NGINX Configuration
# ============================================================================
CONF_PROCESS["nginx"]="nginx"
CONF_START["nginx"]="nginx"
CONF_REQUIRED["nginx"]="nginx"

# ============================================================================
# PHP-FPM Configuration
# ============================================================================
CONF_PROCESS["php-fpm"]="php-fpm"
CONF_START["php-fpm"]="php-fpm"
CONF_REQUIRED["php-fpm"]="php-fpm"

# ============================================================================
# Cloudflared Configuration
# ============================================================================
CONF_PROCESS["cloudflared"]="cloudflared"
CONF_START["cloudflared"]="termux-chroot cloudflared tunnel run my-tunnel"
CONF_REQUIRED["cloudflared"]="cloudflared"

# ============================================================================
# Battery Monitor Configuration
# ============================================================================
CONF_PROCESS["battery"]="php /data/data/com.termux/files/home/battery.php"
CONF_START["battery"]="nohup php /data/data/com.termux/files/home/battery.php"
CONF_REQUIRED["battery"]="php"

# ============================================================================
# SSHD Configuration
# ============================================================================
CONF_PROCESS["sshd"]="sshd"
CONF_START["sshd"]="sshd"
CONF_REQUIRED["sshd"]="sshd"
CONF_SKIP_STOP["sshd"]="true"
